const grid={init:function(e){grid.build_container(e),grid.key_event()},build_container:function(e){if(document.querySelectorAll("t-grid")[0])return;let t=document.createElement("div");t.className="t-grid",t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width=e.width,t.style.margin="0 auto",t.style.height="100%",t.style.pointerEvents="none",t.style.zIndex="100",document.body.appendChild(t);let l=document.createElement("div");l.className="t-code",l.style.position="fixed",l.style.top="20px",l.style.left="20px",l.style.height="calc(100% - 40px)",l.style.overflowY="scroll",l.style.fontFamily="SFMono-Regular,Menlo,Monaco,Consolas,monospace",l.style.fontSize="14px",l.style.pointerEvents="none",l.style.backgroundColor="white",l.style.color="#464646",l.style.border="1px solid #dddddd",l.style.padding="20px",l.style.zIndex="101",document.body.appendChild(l),document.querySelectorAll(".t-code")[0].style.display="none",grid.build_grid(t,e)},build_grid:function(e,t){let l=[],n=[];if(t.columns=parseInt(t.columns),void 0===t.predefined&&(t.predefined=[]),t.predefined.length>0)for(i=0;i<t.predefined.length;i++){num=i+1;let l=document.createElement("span");l.className="col-line col-line-"+num,l.style.position="fixed",l.style.display="block",l.style.left=t.predefined[i][0],l.style.width=t.predefined[i][1],l.style.height="100%",l.style.backgroundColor="red",l.style.opacity=.25,e.appendChild(l)}else{for(i=0;i<t.columns;i++){function o(){let e=grid.get_random_divider(0,100,t.divider,l);return-1===Array.prototype.indexOf(e,l)?e:o()}let e;e=1==t.random?o():100/t.columns*i,l.push(e),l.sort(function(e,t){return e-t})}let d=l.length,r="";for(i=0;i<d;i++){let o;num=i+1,o=num==d?100-l[i]:l[i+1]-l[i],1==d&&(o=100-l[i]);let s=document.createElement("span");s.className="g-col g-col-"+num,s.style.position="fixed",s.style.display="block",s.style.left=l[i]+t.unit,s.style.width=o-t.gutter+t.unit,s.style.height="100%",s.style.backgroundColor="red",s.style.opacity=.25,e.appendChild(s),n.push([l[i]+t.unit,o-.5+t.unit]),r+=".g-col-"+num+" { <br/>left : "+l[i]+"%; <br/>width : "+o+"%; <br/>}<br/>"}document.querySelector(".t-code").innerHTML=r,console.log(JSON.stringify(n))}},get_random_divider:function(e,t,l,n){if(e=e||0,l=l||1,!t)return new Error("need to define a max");let o=Math.round(Math.floor(Math.random()*(t-e)/l)*l+e);return-1!==Array.prototype.indexOf(o,n)?o=Math.round(Math.floor(Math.random()*(t-e)/l)*l+e):o},key_event:function(){let e=!1,t=!1;document.body.onkeydown=function(l){"g"==l.key&&(0==e?(document.querySelectorAll(".t-grid")[0].style.display="block",e=!0):(document.querySelectorAll(".t-grid")[0].style.display="none",e=!1)),"c"==l.key&&(0==t?(document.querySelectorAll(".t-code")[0].style.display="block",t=!0):(document.querySelectorAll(".t-code")[0].style.display="none",t=!1)),l.preventDefault()}}};